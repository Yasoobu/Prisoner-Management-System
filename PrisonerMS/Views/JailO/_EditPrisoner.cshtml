@model PrisonerMS.Models.Prisoner

<div>
    <div class="card rounded px-5 py-2">
        <div class="card-body">
            <form onsubmit="return CheckValidation(this)" action="ErrorImp" class="form needs-validation" role="form" autocomplete="off" method="post">

                <div class="form-group">
                    <label for="C_PNumber">Number</label>
                    <input type="text" class="form-control" placeholder="Enter Prisoner Number" id="C_Title1" name="Title" value="@Model.PrisonerNo" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_FName">First Name</label>
                    <input type="text" class="form-control" placeholder="Enter First Name" id="C_FName1" name="FirstName" value="@Model.FirstName" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_LName">Last Name</label>
                    <input type="text" class="form-control" placeholder="Enter Last Name" id="C_LName1" name="LastName" value="@Model.LastName" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_Gen">Gender</label>
                    <input type="text" class="form-control" placeholder="Enter Gender (M/F)" id="C_Gen1" name="Gender" value="@Model.Gender" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_FTName">Father Name</label>
                    <input type="text" class="form-control" placeholder="Enter Prisoner's Father Name" id="C_FTName1" name="FatherName" value="@Model.FatherName" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_CNIC">CNIC</label>
                    <input type="text" class="form-control" placeholder="Enter CNIC" id="C_CNIC1" name="CNIC" value="@Model.CNIC" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_Add">Address</label>
                    <input type="text" class="form-control" placeholder="Enter Address" id="C_Add1" name="Address" value="@Model.Address" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_DOB">Date of Birth</label>
                    <input type="text" class="form-control" placeholder="Enter Birth Date (30/12/2000)" id="C_DOB1" name="DOB" value="@Model.DateBirth" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_VD">Visiting Day</label>
                    <input type="text" class="form-control" placeholder="Enter Visiting Day (Monday)" id="C_VD1" name="VD" value="@Model.VisitingDay" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div class="form-group">
                    <label for="C_VT">Visiting Time</label>
                    <input type="text" class="form-control" placeholder="Enter Visitng Time (13:00)" id="C_VT1" name="VT" value="@Model.VisitingTime" required>
                    <div class="invalid-feedback">Please enter valid input</div>
                </div>

                <div>
                    <button type="submit" class="btn btn-success btn-block" onclick="return CheckValidation()">Update Prisoner</button>
                </div>

            </form>
        </div>
    </div>
</div>

<script>

//Javascript Validation

    function CheckValidation() {
        var pnum = document.getElementById("C_Title1");
        var fname = document.getElementById("C_FName1");
        var lname = document.getElementById("C_LName1");
        var gender = document.getElementById("C_Gen1");
        var ftname = document.getElementById("C_FTName1");
        var cnic = document.getElementById("C_CNIC1");
        var address = document.getElementById("C_Add1");
        var dob = document.getElementById("C_DOB1");
        var visitingday = document.getElementById("C_VD1");
        var visitingtime = document.getElementById("C_VT1");
        var flag = 0;

        if (!CheckPnum(pnum)) {
            alert("Invalid Prisoner number");
            pnum.value = "";
            flag = 1;
        }

        if (!CheckName(fname)) {
            alert("Invalid First name");
            fname.value = "";
            flag = 1;
        }
        if (!CheckName(lname)) {
            alert("Invalid Last name");
            lname.value = "";
            flag = 1;
        }
        if (!CheckGender(gender)) {
            alert("Invalid gender. Please write M or F");
            gender.value = "";
            flag = 1;
        }
        if (!CheckName(ftname)) {
            alert("Invalid Father name");
            ftname.value = "";
            flag = 1;
        }
        if (!CheckCNIC(cnic)) {
            alert("Invalid CNIC");
            cnic.value = "";
            flag = 1;
        }
        if (!CheckAddress(address)) {
            alert("Invalid Address");
            address.value = "";
            flag = 1;
        }
        if (!CheckDOB(dob)) {
            alert("Invalid Date of Birth");
            dob.value = "";
            flag = 1;
        }
        if (!CheckVisitingDay(visitingday)) {
            alert("Invalid Visiting Day");
            visitingday.value = "";
            flag = 1;
        }
        if (!CheckVisitingTime(visitingtime)) {
            alert("Invalid Visiting Time");
            visitingtime.value = "";
            flag = 1;
        }


        if (flag == 0) {
            alert("All values valid");
            return true;
        }
        
        alert("Invalid values detected. Please enter valid data");
        return false;

    }


    function CheckName(inputtxt) {
        var allowed = /^[a-z ,.'-]+$/i;

        if (inputtxt.value.match(allowed))
        {
            return true;
        }
        return false;

    }

    function CheckCNIC(input) {
        var allowed1 = /^[0-9 -]{15,15}$/;
        var allowed2 = /^[0-9]{13,13}$/;

        if (input.value.match(allowed1) || input.value.match(allowed2))
        {
            return true;
        }
        return false;

    }

    function CheckAddress(input) {
        var allowed3 = /^[0-9a-zA-Z\s #(),.-]+$/;

        if (input.value.match(allowed3))
        {
            return true;
        }
        return false;

    }

    function CheckPnum(input) {
        var allowed = /^[0-9]+$/;

        if (input.value.match(allowed))
        {
            return true;
        }
        return false;

    }

    function CheckGender(input) {
        if (input.value == 'M' || input.value == 'F')
            return true;
        return false;

    }

    function CheckDOB(input) {
        var allowed4 = /^\d{2}\/\d{2}\/\d{4}$/ ;
        if (input.value.match(allowed4))
            return true;
        return false;

    }

    function CheckVisitingDay(input) {
        var allowed5 = /^[a-z]+$/i;
        if (input.value.match(allowed5))
            return true;
        return false;

    }

    function CheckVisitingTime(input) {
        var allowed6 = /^[(]([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9][)]$/;
        if (input.value.match(allowed6))
            return true;
        return false;

    }

</script>